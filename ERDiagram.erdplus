{"version":2,"www":"erdplus.com","shapes":[{"type":"Entity","details":{"name":"Building","type":"regular","x":195,"y":252,"id":1}},{"type":"Attribute","details":{"name":"ID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":true,"x":195,"y":168,"id":2}},{"type":"Entity","details":{"name":"Apartment","type":"regular","x":541,"y":253,"id":14}},{"type":"Attribute","details":{"name":"ID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":true,"x":541,"y":169,"id":15}},{"type":"Attribute","details":{"name":"Number","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":633,"y":195,"id":17}},{"type":"Attribute","details":{"name":"BuildingID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":659,"y":253,"id":19}},{"type":"Relationship","details":{"name":"BuildingApartment","isIdentifying":false,"x":368,"y":251,"slots":[{"slotIndex":0,"minimum":"","maximum":"","participation":"mandatory","cardinality":"many","role":"","entityId":1},{"slotIndex":1,"minimum":"","maximum":"","participation":"mandatory","cardinality":"one","role":"","entityId":14}],"id":23}},{"type":"Entity","details":{"name":"User","type":"regular","x":1232,"y":122,"id":26}},{"type":"Attribute","details":{"name":"ID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":true,"x":1348,"y":57,"id":27}},{"type":"Attribute","details":{"name":"Name","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":1232,"y":42,"id":31}},{"type":"Entity","details":{"name":"Contract","type":"regular","x":800,"y":551,"id":43}},{"type":"Attribute","details":{"name":"ID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":true,"x":786,"y":475,"id":44}},{"type":"Attribute","details":{"name":"OwnerID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":888,"y":498,"id":46}},{"type":"Attribute","details":{"name":"TenantID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":917,"y":552,"id":48}},{"type":"Attribute","details":{"name":"StartDate","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":879,"y":611,"id":52}},{"type":"Attribute","details":{"name":"EndDate","isDerived":false,"isMultivalued":false,"isOptional":true,"isComposite":false,"isUnique":false,"x":761,"y":617,"id":54}},{"type":"Attribute","details":{"name":"ContractID","isDerived":false,"isMultivalued":false,"isOptional":true,"isComposite":false,"isUnique":true,"x":618,"y":313,"id":56}},{"type":"Attribute","details":{"name":"ApartmentID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":692,"y":511,"id":61}},{"type":"Attribute","details":{"name":"LandlordID","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":516,"y":333,"id":64}},{"type":"Label","details":{"text":"A user has no notion of Tenant / Landlord or even hausverwaltung.\nTheir statuses are derived based on the system status.\n\nAn idea was be to add Boolean value to indicate faster if a user is a landlord as by definition anyone can be a tenant.\n\nThis helps with quicker querying of Landlords and still retains the requirement for a landlord to be able to rent from other landlords.","x":1131,"y":157,"width":217,"height":164,"id":66}},{"type":"Attribute","details":{"name":"IsLandlord","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":1127,"y":53,"id":67}},{"type":"Label","details":{"text":"The main idea is that a building is a collection of Apartments.\nOfcourse this can have issues in data input but we assume that a wrong apartment cannot go into the wrong building, otherwise we would have to add a constraint for street, country etc.\n\nAs a landlord might own a whole building or 1.5 buildings, he never owns a building but apartments, which allows full flexibility and querying if an owner owns a building is trivial in terms of query and speed.","x":134,"y":297,"width":248,"height":164,"id":69}},{"type":"Label","details":{"text":"The contract.\nI think this is the most to-be-discussed table. Depending on which school you are fond of, you will code the logic on the DB layer by adding rules on the tables or in the stored procedure, or add the rules on the code.\nPersonally I prefer to add it on the code.\nIn this case this table would work as follows:\n1-1 (1 landlord , 1 tenant) \nresults in one row.\n1 - X (1 landlord, multiple tenants) results in multiple rows with the same landlord and apartmentID and even the same start date if you are renting a big flat.\n\nContinuing the same logic you can rent whole buildings to the same person, to multiple etc.\n\nThe one downside is how to control the uniqueness, so that not 2 people are renting a single apartment (which you could argue that it is possible as a couple) but as to say not 100 are renting 1 place, we would need room capacity on the apartment level and use a flag as \"Occupied\" on the Apartment.","x":996,"y":430,"width":379,"height":223,"id":70}},{"type":"Label","details":{"text":"I am not sure how to show composite unique key constraint on an ER diagram. However here we would have such a key between BuildingID, LandlordID and Number. \nThus ensuring that only 1 landlord owns this apartment in this building.","x":727,"y":154,"width":202,"height":116,"id":71}},{"type":"Relationship","details":{"name":"ContractOwnerUser","isIdentifying":false,"x":945,"y":301,"slots":[{"slotIndex":0,"minimum":"","maximum":"","participation":"unspecified","cardinality":"unspecified","role":"","entityId":43},{"slotIndex":1,"minimum":"","maximum":"","participation":"unspecified","cardinality":"unspecified","role":"","entityId":26}],"id":72}},{"type":"Relationship","details":{"name":"ContractTenantID","isIdentifying":false,"x":1036,"y":349,"slots":[{"slotIndex":0,"minimum":"","maximum":"","participation":"mandatory","cardinality":"unspecified","role":"","entityId":43},{"slotIndex":1,"minimum":"","maximum":"","participation":"mandatory","cardinality":"unspecified","role":"","entityId":26}],"id":75}},{"type":"Relationship","details":{"name":"ContractApartment","isIdentifying":false,"x":474,"y":524,"slots":[{"slotIndex":0,"minimum":"","maximum":"","participation":"unspecified","cardinality":"many","role":"","entityId":14},{"slotIndex":1,"minimum":"","maximum":"","participation":"unspecified","cardinality":"one","role":"","entityId":43}],"id":78}}],"connectors":[{"type":"Connector","details":{"id":13},"source":2,"destination":1},{"type":"Connector","details":{"id":16},"source":15,"destination":14},{"type":"Connector","details":{"id":18},"source":17,"destination":14},{"type":"Connector","details":{"id":20},"source":19,"destination":14},{"type":"RelationshipConnector","details":{"slotIndex":0,"id":24},"source":1,"destination":23},{"type":"RelationshipConnector","details":{"slotIndex":1,"id":25},"source":14,"destination":23},{"type":"Connector","details":{"id":28},"source":27,"destination":26},{"type":"Connector","details":{"id":32},"source":31,"destination":26},{"type":"Connector","details":{"id":45},"source":44,"destination":43},{"type":"Connector","details":{"id":47},"source":46,"destination":43},{"type":"Connector","details":{"id":49},"source":48,"destination":43},{"type":"Connector","details":{"id":53},"source":52,"destination":43},{"type":"Connector","details":{"id":55},"source":54,"destination":43},{"type":"Connector","details":{"id":57},"source":56,"destination":14},{"type":"Connector","details":{"id":62},"source":61,"destination":43},{"type":"Connector","details":{"id":65},"source":64,"destination":14},{"type":"Connector","details":{"id":68},"source":67,"destination":26},{"type":"RelationshipConnector","details":{"slotIndex":0,"id":73},"source":43,"destination":72},{"type":"RelationshipConnector","details":{"slotIndex":1,"id":74},"source":26,"destination":72},{"type":"RelationshipConnector","details":{"slotIndex":0,"id":76},"source":43,"destination":75},{"type":"RelationshipConnector","details":{"slotIndex":1,"id":77},"source":26,"destination":75},{"type":"RelationshipConnector","details":{"slotIndex":0,"id":79},"source":14,"destination":78},{"type":"RelationshipConnector","details":{"slotIndex":1,"id":80},"source":43,"destination":78}],"width":2000,"height":1000}